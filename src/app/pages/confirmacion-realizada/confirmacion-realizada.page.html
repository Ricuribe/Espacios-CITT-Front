<ion-header class="main-header" [translucent]="true">
  <ion-toolbar class="main-toolbar">
    <ion-buttons slot="start" class="mobile-only-button">
      <ion-menu-button color="light" menu="menu-confirmacion"></ion-menu-button>
    </ion-buttons>

    <img src="/assets/icon/Gemvirt_logo.png" alt="Logo" class="logo">

    <ion-buttons slot="end" class="desktop-only-buttons">
      <ion-chip class="user-chip">
        <ion-avatar>
          <img src="https://ionicframework.com/docs/img/demos/avatar.svg" alt="Avatar" />
        </ion-avatar>
        <ion-label>{{ userName }}</ion-label>
      </ion-chip>
      <ion-button class="btn-logout" fill="solid" color="light" (click)="logout()">Cerrar Sesión</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-menu contentId="success-content" type="overlay" menuId="menu-confirmacion">
  <ion-header>
    <ion-toolbar>
      <ion-title>Menú</ion-title>
    </ion-toolbar>
  </ion-header>
  <ion-content>
    <ion-list lines="none">
      <ion-item button [routerLink]="['/inicio-usuario']"><ion-icon name="home-outline" slot="start"></ion-icon><ion-label>Inicio</ion-label></ion-item>
      <ion-item button [routerLink]="['/recursos']"><ion-icon name="folder-open-outline" slot="start"></ion-icon><ion-label>Recursos</ion-label></ion-item>
      <ion-item button [routerLink]="['/proyectos']"><ion-icon name="library-outline" slot="start"></ion-icon><ion-label>Memorias</ion-label></ion-item>
      <ion-item button (click)="logout()" class="logout-item"><ion-icon name="log-out-outline" slot="start"></ion-icon><ion-label>Cerrar Sesión</ion-label></ion-item>
    </ion-list>
  </ion-content>
</ion-menu>

<ion-content [fullscreen]="true" id="success-content" class="success-content">
  
  <div class="page-wrapper">
    
    <div class="header-section">
      <div class="icon-circle">
        <ion-icon name="checkmark-circle-outline"></ion-icon>
      </div>
      <h1>¡Solicitud Exitosa!</h1>
      <p>Tu evento ha sido registrado correctamente.</p>
    </div>

    <div class="content-card-wrapper">
      
      <ion-card class="summary-card">
        <div class="card-body">
          
          <div class="details-section" *ngIf="isEvent && eventData">
            <h2>{{ eventData.title }}</h2>
            
            <div class="meta-row">
              <div class="meta-item">
                <ion-icon name="calendar-outline"></ion-icon>
                <span>{{ eventData.start_datetime | date:'fullDate' }}</span>
              </div>
              <div class="meta-item">
                <ion-icon name="time-outline"></ion-icon>
                <span>{{ eventData.start_datetime | date:'shortTime' }} - {{ eventData.end_datetime | date:'shortTime' }}</span>
              </div>
            </div>

            <p class="description" *ngIf="eventData.detail?.description">
              {{ eventData.detail.description }}
            </p>
          </div>

          <hr class="divider">

          <div class="qr-section" *ngIf="qrValue">
            <h3>Invitación Pública</h3>
            <p>Comparte este código para que otros se inscriban.</p>
            
            <div class="qr-container">
              <qrcode 
                [qrdata]="qrValue" 
                [width]="qrWidth" 
                [errorCorrectionLevel]="'M'" 
                [margin]="2"
                colorDark="#000000"
                colorLight="#ffffff"
                (qrCodeURL)="onQrUrl($event)">
              </qrcode>
            </div>

            <div class="qr-actions">
              <ion-button fill="outline" size="small" (click)="downloadQr()">
                <ion-icon name="download-outline" slot="start"></ion-icon>
                Descargar QR
              </ion-button>
              
              <ion-button *ngIf="eventEditLink" fill="outline" size="small" (click)="openEditLink()">
                <ion-icon name="share-social-outline" slot="start"></ion-icon>
                Editar Formulario
              </ion-button>
            </div>
          </div>

          <div class="action-area">
            <ion-button class="btn-home" expand="block" [routerLink]="['/inicio-usuario']">
              VOLVER AL INICIO
            </ion-button>
          </div>

        </div>
      </ion-card>

    </div>
  </div>

  <app-footer></app-footer>
</ion-content>