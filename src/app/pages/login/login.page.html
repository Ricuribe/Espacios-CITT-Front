<!-- 
  =============================================
  NUEVO HEADER DE AUTENTICACIÓN
  Reemplaza el diseño split-screen
  =============================================
-->
<ion-header class="auth-header" [translucent]="true">
  <ion-toolbar class="main-toolbar">
    <ion-buttons slot="start">
      <!-- Botón para volver al Home (página pública) -->
      <ion-button [routerLink]="['/home']" color="light" routerDirection="back">
        <ion-icon slot="icon-only" name="arrow-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    
    <!-- 
      Usamos slot="primary" (derecha) para el logo,
      copiando el estilo del header de tu app.
    -->
    <ion-buttons slot="primary">
       <ion-img src="/assets/icon/Gemvirt_logo.png" alt="Logo GemVirt" class="logo"></ion-img>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<!-- 
  =============================================
  CONTENIDO PRINCIPAL (FORMULARIO CENTRADO)
  =============================================
-->
<ion-content [fullscreen]="true" class="form-page-content">
    <div class="form-container">
      
      <!-- El logo-mobile ya no se necesita, el header lo reemplaza -->
      
      <h3>Iniciar Sesión</h3>

      <!-- Formulario Reactivo de Login (Tu código original) -->
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
        
        <!-- CAMPO: Email -->
        <ion-item class="form-item">
          <ion-input 
            label="Email Institucional" 
            labelPlacement="stacked" 
            placeholder="ej: nombre.apellido@duocuc.cl"
            type="email"
            formControlName="email"
            [class.ion-invalid]="email?.invalid && email?.touched"
            [class.ion-valid]="email?.valid && email?.touched">
          </ion-input>
        </ion-item>
        <!-- Alertas Inline para Email -->
        <div *ngIf="email?.invalid && email?.touched" class="error-message">
          <ion-text color="danger" *ngIf="email?.hasError('required')">
            El email es requerido.
          </ion-text>
          <ion-text color="danger" *ngIf="email?.hasError('email')">
            El formato del email no es válido.
          </ion-text>
        </div>

        <!-- CAMPO: Contraseña -->
        <ion-item class="form-item">
          <ion-input 
            label="Contraseña" 
            labelPlacement="stacked" 
            placeholder="Ingresa tu contraseña"
            [type]="passwordVisible ? 'text' : 'password'"
            formControlName="password"
            [class.ion-invalid]="password?.invalid && password?.touched"
            [class.ion-valid]="password?.valid && password?.touched">
          </ion-input>
          <!-- Botón para ver/ocultar contraseña -->
          <ion-button fill="clear" slot="end" (click)="togglePasswordVisibility()" class="password-toggle">
            <ion-icon [name]="passwordVisible ? 'eye-off-outline' : 'eye-outline'" slot="icon-only"></ion-icon>
          </ion-button> 
        </ion-item>
        <!-- Alertas Inline para Contraseña -->
        <div *ngIf="password?.invalid && password?.touched" class="error-message">
          <ion-text color="danger" *ngIf="password?.hasError('required')">
            La contraseña es requerida.
          </ion-text>
        </div>

        <!-- Link de Olvidé Contraseña (Opcional) -->
        <div class="forgot-password-link">
          <ion-button fill="clear" size="small" [routerLink]="['/recuperar-pass']">
            ¿Olvidaste tu contraseña?
          </ion-button>
        </div>

        <!-- Botón de Envío -->
        <ion-button 
          type="submit" 
          expand="block" 
          class="submit-button"
          [disabled]="loginForm.invalid">
          Iniciar Sesión
        </ion-button>
        
      </form>

      <!-- Enlace para ir a Registrarse -->
      <div class="footer-link">
        <span>¿No tienes una cuenta?</span>
        <ion-button fill="clear" [routerLink]="['/registro']">
          Regístrate aquí
        </ion-button>
      </div>

    </div> <!-- Fin de .form-container -->
</ion-content>