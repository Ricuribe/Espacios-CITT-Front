<!-- HEADER ESTÁNDAR CON LOGO -->
<ion-header class="main-header" [translucent]="true">
  <ion-toolbar class="main-toolbar">
    
    <!-- Botón Volver -->
    <ion-buttons slot="start">
      <ion-button [routerLink]="['/inicio-usuario']" color="light" fill="clear">
        <ion-icon slot="icon-only" name="arrow-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>

    <!-- Logo Centrado/Ajustado -->
     <a [routerLink]="['/inicio-usuario']" class="logo-container">
    <img src="/assets/icon/Gemvirt_logo.png" alt="Logo GemVirt" class="logo">
      </a>
    <!-- Espaciador derecha -->
    <ion-buttons slot="end" class="desktop-only-buttons">
       <!-- Botones opcionales si los necesitas -->
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="management-content">
  
  <div class="page-container">
    
    <div class="page-header">
      <h1>Gestión de Eventos</h1>
    </div>

    <!-- TABS / FILTROS -->
    <div class="tabs-container">
      <ion-segment [(ngModel)]="statusFilter" (ionChange)="loadEvents()" mode="md" class="custom-segment">
        <ion-segment-button value="all">
          <ion-label>TODOS</ion-label>
        </ion-segment-button>
        <ion-segment-button value="pending">
          <ion-label>PENDIENTES</ion-label>
        </ion-segment-button>
        <ion-segment-button value="confirmed">
          <ion-label>CONFIRMADOS</ion-label>
        </ion-segment-button>
      </ion-segment>
    </div>

    <!-- LISTA DE EVENTOS -->
    <div class="events-list">
      
      <!-- Loader -->
      <div *ngIf="isLoading()" class="loader-container">
        <ion-spinner name="crescent" color="light"></ion-spinner>
      </div>

      <!-- Empty State -->
      <div *ngIf="!isLoading() && filteredEvents().length === 0" class="empty-state">
        <p>No hay eventos en esta categoría.</p>
      </div>

      <!-- Tarjetas Estilo Mockup -->
      <div class="event-card" *ngFor="let ev of filteredEvents()">
        
        <!-- Franja de color lateral (Indicador) -->
        <div class="status-strip"></div>

        <div class="card-body">
          <h3 class="event-title">{{ ev.title || 'Sin Título' }}</h3>
          
          <div class="event-meta">
            <div class="meta-item">
              <ion-icon name="calendar-outline"></ion-icon>
              <span>{{ formatDate(ev.start_datetime) }}</span>
            </div>
            <div class="meta-item">
              <ion-icon name="time-outline"></ion-icon>
              <span>{{ formatTime(ev.start_datetime) }} - {{ formatTime(ev.end_datetime) }}</span>
            </div>
          </div>
        </div>

        <!-- Botones de Acción Circulares -->
        <div class="card-actions">
          <button class="circle-btn edit" (click)="goToEdit(ev.id)">
            <ion-icon name="pencil-outline"></ion-icon>
          </button>
          <button class="circle-btn delete" (click)="deleteEvent(ev)">
            <ion-icon name="trash-outline"></ion-icon>
          </button>
        </div>

      </div>

    </div>

  </div>

  <app-footer></app-footer>
</ion-content>